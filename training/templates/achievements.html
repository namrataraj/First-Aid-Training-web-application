{% extends "base.html" %}
{% block title %}Achievements{% endblock %}

{% block content %}
<div class="container-fluid p-4">
    <h2 class="fw-bold">Achievements</h2>
    <p class="text-muted">Track your progress and earn recognition</p>

    <!-- Debug Info 
    <p>Unlocked Count : {{ unlocked_count }}</p>
    <p>Earned ID: {{ earned_ids }}</p>

    <p>Achievements:</p>
    <ul>
        {% for entry in achievements %}
            <li>{{ entry.achievement.title }} - Achieved: {{ entry.achieved }}</li>
        {% endfor %}
    </ul>

    <div class="d-flex justify-content-between">
        <p class="text-muted">Track your progress and earn recognition</p>
        <p class="text-end fw-bold mb-3">
            {{ unlocked_count }} Achievements Unlocked
        </p>
    </div>-->

    <div class="row g-4">
        {% for entry in achievements %}
            {% with achievement=entry.achievement achieved=entry.achieved %}
            <div class="col-12 col-sm-6 col-md-4 col-lg-4">
                <div class="card achievement-card {% if achieved %}unlocked{% else %}locked{% endif %} text-center p-3 shadow-sm rounded-4 h-100 d-flex flex-column">
                    <h1 style="font-size: 3rem;">
                        {% if achievement.icon|length < 4 %}
                            {{ achievement.icon }}  {# emoji or short icon string #}
                        {% else %}
                            <i class="{{ achievement.icon }}"></i>  {# font awesome or class-based icon #}
                        {% endif %}
                    </h1>

                    <h5 class="fw-bold">{{ achievement.title }}</h5>
                    <p class="text-muted flex-grow-1">{{ achievement.description }}</p>

                    {% if achieved %}
                        <i class="fa fa-check-circle text-success mt-auto"></i>
                    {% else %}
                        <i class="fa fa-lock text-muted mt-auto"></i>
                    {% endif %}
                </div>
            </div>
            {% endwith %}
        {% endfor %}
    </div>
</div>
{% endblock %}
